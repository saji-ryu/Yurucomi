{"version":3,"sources":["../src/server/checkMatchUsers.ts"],"names":["checkMatchUsers","data","Users","user","settings","_where","prop","hasOwnProperty","matched","find","ele","a","Asearch","value","match","_payload","_from","push"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;AAGA,IAAMA,eAAe;AAAA;AAAA;AAAA,+BAAG,WAAOC,IAAP,EAA4B;AAClD;AACA,QAAMC,KAAoB,GAAG,EAA7B;;AACA,SAAK,IAAIC,IAAT,IAAiBC,sBAASH,IAAI,CAACI,MAAd,CAAjB,EAAwC;AAAA,iCAC7BC,IAD6B;AAEpC,YAAIF,sBAASH,IAAI,CAACI,MAAd,EAAsBF,IAAtB,EAA4BI,cAA5B,CAA2CD,IAA3C,CAAJ,EAAsD;AACpD,cAAME,OAAO,GAAGJ,sBAASH,IAAI,CAACI,MAAd,EAAsBF,IAAtB,EAA4BG,IAA5B,EAAkCG,IAAlC,CAAuC,UAAAC,GAAG,EAAI;AAC5D,gBAAMC,CAAC,GAAG,IAAIC,gBAAJ,CAAYF,GAAG,CAACG,KAAhB,CAAV,CAD4D,CAE5D;;AACA,mBAAOF,CAAC,CAACG,KAAF,CAAQb,IAAI,CAACc,QAAL,CAAcT,IAAd,CAAR,EAA6B,CAA7B,CAAP;AACD,WAJe,CAAhB;;AAKA,cAAIE,OAAO,IAAIP,IAAI,CAACe,KAAL,KAAeb,IAA9B,EAAoC;AAClCD,YAAAA,KAAK,CAACe,IAAN,CAAWd,IAAX;AACD;AACF;AAXmC;;AACtC,WAAK,IAAIG,IAAT,IAAiBL,IAAI,CAACc,QAAtB,EAAgC;AAAA,cAAvBT,IAAuB;AAW/B;AACF;;AACD,WAAOJ,KAAP;AACD,GAlBoB;;AAAA,kBAAfF,eAAe;AAAA;AAAA;AAAA,GAArB;;eAoBeA,e","sourcesContent":["import settings from \"./userSettings\";\nimport Asearch from \"asearch\";\nimport { InsertData } from \"../linda/interfaces\";\n\nconst checkMatchUsers = async (data: InsertData) => {\n  // evet発火を制御する部分\n  const Users: Array<string> = [];\n  for (let user in settings[data._where]) {\n    for (let prop in data._payload) {\n      if (settings[data._where][user].hasOwnProperty(prop)) {\n        const matched = settings[data._where][user][prop].find(ele => {\n          const a = new Asearch(ele.value);\n          // return ele.value === data._payload[prop];\n          return a.match(data._payload[prop], 1);\n        });\n        if (matched && data._from !== user) {\n          Users.push(user);\n        }\n      }\n    }\n  }\n  return Users;\n};\n\nexport default checkMatchUsers;\n"],"file":"checkMatchUsers.js"}