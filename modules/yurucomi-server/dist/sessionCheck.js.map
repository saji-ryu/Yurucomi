{"version":3,"sources":["../src/server/sessionCheck.ts"],"names":["sessionCheck","req","res","next","tsName","originalUrl","match","slice","session","userName","redirect"],"mappings":";;;;;;;AACA,IAAMA,YAAY,GAAG,SAAfA,YAAe,CACnBC,GADmB,EAEnBC,GAFmB,EAGnBC,IAHmB,EAIhB;AACH,MAAMC,MAAM,GAAGH,GAAG,CAACI,WAAJ,CAAgBC,KAAhB,CAAsB,UAAtB,IACX,EADW,GAEXL,GAAG,CAACI,WAAJ,CAAgBE,KAAhB,CAAsB,CAAtB,CAFJ;;AAGA,MAAIN,GAAG,CAACO,OAAR,EAAiB;AACf,QAAIP,GAAG,CAACO,OAAJ,CAAYC,QAAhB,EAA0B;AACxBN,MAAAA,IAAI;AACL,KAFD,MAEO;AACLD,MAAAA,GAAG,CAACQ,QAAJ,yBAA8BN,MAA9B;AACD;AACF,GAND,MAMO;AACLF,IAAAA,GAAG,CAACQ,QAAJ,yBAA8BN,MAA9B;AACD;AACF,CAjBD;;eAmBeJ,Y","sourcesContent":["import express from \"express\";\nconst sessionCheck = (\n  req: express.Request,\n  res: express.Response,\n  next: express.NextFunction\n) => {\n  const tsName = req.originalUrl.match(/^\\/\\_.+$/)\n    ? \"\"\n    : req.originalUrl.slice(1);\n  if (req.session) {\n    if (req.session.userName) {\n      next();\n    } else {\n      res.redirect(`/_login?where=${tsName}`);\n    }\n  } else {\n    res.redirect(`/_login?where=${tsName}`);\n  }\n};\n\nexport default sessionCheck;\n"],"file":"sessionCheck.js"}